---
title: Integration Workshop
layout: presentation
---

<!-- # Mistral Assembly 2018 -->

### Integration Workshop

Will Usher, Tom Russell &amp; Roald Schoenmakers

---

# Agenda

Day 2: Morning (09:30 - 10:30)

1. Integration Progress So Far (Will) - 10 mins
1. The Software Model Integration Framework (Roald) - 10 mins
1. Plenary discussion - 40 mins
  - Reproducible data pre-process pipelines (Will)
  - NISMOD 2 release schedule (Roald)
  - Enabling the collaborative papers (Tom)

---

# NISMOD v2.x

<img src="../fig/integration-workshop/nismod2_diagram.png" />

???

- This is where we want to get to
- We have a number of infrastructure simulation models
- They are fed data from a datastore of some kind
- They produce results
- We defined dependencies between the models, and define conversion functions
  (adapters) to allow the outputs from one model to feed into the inputs of another
- We'll provide a number of decision modules that work across each of the infrastructure
  sectors
- Our work here is supported by the simulation model integration framework (smif)
- Smif provides the functionality to create, deploy, manage system of system models,
  and run, analyze and archive model runs using these system-of-system models
- All of this runs on hardware, yet to be defined

---

# NISMOD v2.1

<img src="../fig/integration-workshop/nismod 21 flow.png" height="500" />

???

We recently released NISMOD v2.1 containing integrated versions of energy demand and supply,
digital comms, and transport.

Currently:
- No interdependencies (yet) defined
- Dependencies defined between energy demand and supply
  - Automatic conversion of (SI) units
  - Implicit/Explicit spatial and temporal conversion
- Common scenarios feed into each of the models

---

# Spatial and Temporal Conversions

<img src="../fig/integration-workshop/temporal_conversion.png" height="200" align="middle"/>
<img src="../fig/integration-workshop/lads.png" height="300"/>
<img src="../fig/integration-workshop/energy_hubs.png" height="300"/>


---

# Example Results

<video controls src="../fig/integration-workshop/map.mp4" type="video/mp4" width="800" align="middle"></video>

---

# Sector Model Progress

![](../fig/integration-workshop/sector_model_status.png)

---

# Lessons we have learned...

- Wrappers are a contract - explicitly declare the data the model requires to run
- Units are important
- Validating data inputs make debugging a LOT easier
  - sign
  - magnitude
  - range
- Keep it simple - by splitting into stages
  - e.g. energy demand has 63 outputs, energy supply requires 8 inputs aggregated from 26 energy demand outputs
- Model data is multi-dimensional and dimensions are (mostly) categorical
  - generalise dimensions of data
  - e.g. spatial, temporal, fuel types, end-uses, transport modes, technologies etc.

---

## Thanks!

Questions?

william.usher@ouce.ox.ac.uk

---

### The Software Model Integration Framework

Roald Schoenmakers

---

# What is Smif

* Smif - Software Model Integration Framework

<center>
  <img src="../fig/integration-workshop/smif-overview.png" alt="Smif Overview" align="middle" style="width: 600px;"/>
</center>

<!--
smif is a framework for handling the creation of system-of-systems models.
The framework handles inputs and outputs, dependencies between models, persistence of data and the communication of state across years.
It has been developed to facilitate the itegration process of a system-of-systems model
-->

---

# What can it do

* Wrap a Sector Model
  + Methods for model initialise and simulate
  + Datahandle to provide parameters, inputs and store outputs

* Build a System-of-System Model
  + Manage inputs, outputs, dependencies and parameters
  + Manage scenarios and narratives
  + Data conversions between units, space and time

* Execute Model Runs
  + Configure Scenarios, Narratives and Timesteps
  + Start Model Runs
  + Store Model Run results

<!--
  The framework provides the foll
-->

---

# Wrap a Sector Model

* Provides Methods
  + Initialise
  + Simulate

<img src="../fig/integration-workshop/smif-wrapper.png" alt="Smif Results" style="float:right;" width="400px" height="auto"/>

* Provides DataHandle
  + Get Data
  + Get Parameters
  + Get Results
  + Set Results

---

# Build a System-of-System model

Smif App

<center>
  <img class="gifplayer" src="../fig/integration-workshop/smif-app-preview.png" data-gif="../fig/integration-workshop/smif-app.gif" width="700px" height="auto"/>
</center>

---

# Execute Model Runs

Smif Run

<br>
<center>
  <img class="gifplayer" src="../fig/integration-workshop/smif-run-preview.png" data-gif="../fig/integration-workshop/smif-run.gif" width="700px" height="auto"/>
</center>

---

# Execute Model Runs

Smif Results

<br>
<br>
<center>
    <img src="../fig/integration-workshop/smif-results.png" alt="Smif Results" width="700px" height="auto"/>
</center>

---

# Further steps

* Wrappers for all Sector Models

<style>
  th {
      background-color: #006E79;
      color: white;
      text-align:left;
  }
</style>

<table style="width:100%">
    <tr>
      <th>Sector</th>
      <th>Wrapper</th>
      <th>Collaborations</th>
      <th>System-of-Systems</th>
    </tr>
    <tr>
      <td>Energy Supply</td>
      <td><img src="../fig/checkbox-on.png" width="30px" height="auto"/></td>
      <td><img src="../fig/checkbox-on.png" width="30px" height="auto"/><sup>Energy Demand-Supply</sup></td>
      <td><img src="../fig/checkbox-off.png" width="30px" height="auto"/></td>
    </tr>
    <tr>
      <td>Energy Demand</td>
      <td><img src="../fig/checkbox-on.png" width="30px" height="auto"/></td>
      <td><img src="../fig/checkbox-on.png" width="30px" height="auto"/><sup>Energy Demand-Supply</sup></td>
      <td><img src="../fig/checkbox-off.png" width="30px" height="auto"/></td>
    </tr>
    <tr>
      <td>Digital Comms</td>
      <td><img src="../fig/checkbox-on.png" width="30px" height="auto"/></td>
      <td><img src="../fig/checkbox-off.png" width="30px" height="auto"/></td>
      <td><img src="../fig/checkbox-off.png" width="30px" height="auto"/></td>
      </tr>
    <tr>
      <td>Transport</td>
      <td><img src="../fig/checkbox-on.png" width="30px" height="auto"/></td>
      <td><img src="../fig/checkbox-off.png" width="30px" height="auto"/></td>
      <td><img src="../fig/checkbox-off.png" width="30px" height="auto"/></td>
    </tr>
    <tr>
      <td>Solid Waste</td>
      <td><img src="../fig/checkbox-off.png" width="30px" height="auto"/></td>
      <td><img src="../fig/checkbox-off.png" width="30px" height="auto"/></td>
      <td><img src="../fig/checkbox-off.png" width="30px" height="auto"/></td>
    </tr>
    <tr>
      <td>Water Supply</td>
      <td><img src="../fig/checkbox-off.png" width="30px" height="auto"/></td>
      <td><img src="../fig/checkbox-off.png" width="30px" height="auto"/></td>
      <td><img src="../fig/checkbox-off.png" width="30px" height="auto"/></td>
    </tr>
  </table>

* Smif debugging tools
* Result visualisation

---

# Discussion (10 mins)

## Reproducible data processing pipelines

--

- Why is this important?

--

- What is difficult about this? Anything currently blocking progress?

--

- How can we learn to do this? Any good examples?

---

# Discussion (10 mins)

## Schedule for integration & NISMOD2 releases

--

<center>
  <img src="../fig/integration-workshop/discussion-deployment.png" alt="Discussion Deployment" width="600px" height="auto"/>
</center>

???

Schedule for integration

In order to build NISMOD2, we will need integrate each of the sector models in the system-of-systems model.
This is an iterative process which has already begun, with digital-comms, transport, energy-supply and demand models already in place.
Our goal is to have a complete integrated system by ..... 2018.

Discussion:
- What is currently stopping you from integration?
- Are there any specific requests for us to better support the integration process?


NISMOD2 releases

In the near future, NISMOD2 will be in used to run simulations, while some sector models are still being integrated, developed or improved.
Our goal is to enable modellers to keep making changes to their models and NISMOD2, but at the same time maintaining a stable release of NISMOD2 for production.
We believe that it is necessary to adopt a release schedule so that we can coordinate a smooth integration process.

[show release cycle]

Discussion:
- Would this release schedule fit into your workflow?
- Are there any suggestions or requirements to add to this release schedule? Frequency? Support?

---

# Discussion (10 mins)

## Internal collaborations - what does NISMOD need to do to enable collaboration?

--
+ Who are your collaborators?
--

+ What do you want to do?
--

+ What does that mean for NISMOD v2?

???

- interdependencies
- narratives - technology learning, governance
- strategies and decisions
  - explorative pathways?
  - optimal systems?
  - robust portfolios?

- thousands of runs?

---

## Thanks!

Questions?

[https://nismod.github.io/presentations/integration-workshop.html](https://nismod.github.io/presentations/integration-workshop.html)

william.usher@ouce.ox.ac.uk

tom.russell@ouce.ox.ac.uk

roald.lemmen@ouce.ox.ac.uk
